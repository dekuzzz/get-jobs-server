## 基础信息

### 通用请求头
```http
Content-Type: application/json
Authorization: Bearer {token}
```

### 通用响应格式
```json
{
  "code": 200,
  "message": "success",
  "data": {},
  "timestamp": 1640995200000
}
```

### 状态码说明
- 200: 成功
- 400: 请求参数错误
- 401: 未授权
- 403: 权限不足
- 404: 资源不存在
- 500: 服务器内部错误

---

## 注册登录

### 1. 发送验证码[4位数字]
**接口地址**: `/api/auth/user/send-verification-code`  
**请求方式**: `POST`  
**是否需要认证**: 否

**请求参数**:
```json
{
  "email": "user@example.com"
}
```

**响应数据**:
```json
{
"code": 200,
"message": "验证码发送成功",
"data": {
"email": "user@example.com",
"purpose": "register",
"expire_in": 300, // 过期时间（秒）
"retry_after": 60 // 重发间隔（秒）
}
}
```
验证码存入verification_codes 表


### 2. 验证注册用户
**接口地址**: `/api/auth/user/verify-code`  
**请求方式**: `POST`  
**是否需要认证**: 否

**请求参数**:
```json
{
  "email": "user@example.com",
  "code": "123456"
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "验证码验证成功",
  "data": {
"verified": true,
"verification_token": "verification_token_from_step2"
  }
}
```

### 2.5 注册用户
**接口地址**: `/api/auth/user/register`  
**请求方式**: `POST`  
**是否需要认证**: 否

**请求参数**:
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "注册成功",
  "data": {
    "user_id": 123,
    "email": "user@example.com"
  }
}
```


### 3. 注册个人/招聘者
**接口地址**: `/api/auth/register`  
**请求方式**: `POST`  
**是否需要认证**: 否

**请求参数**:
```json
{
  "email": "user@example.com",
  "user_type": "job_seeker", // job_seeker | recruiters
  "full_name": "张三",
  "title": "HR",//注册招聘者所需字段
"verification_token": "verification_token_from_step2"
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "注册成功",
  "data": {
"user_id": 123,
"talent_id": 123,/ "recruiter_id": 123,
    "email": "user@example.com",
    "user_type": "job_seeker",// job_seeker | recruiters
    "name": "张三"
  }
}
```
个人存入talents表，招聘者存入recruiters 表


### 4. 用户登录
**接口地址**: `/auth/login`  
**请求方式**: `POST`  
**是否需要认证**: 否

**请求参数**:
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "token_type": "bearer",
    "expires_in": 7200, // access token过期时间（秒）
    "user_info": {
      "user_id": 123,
      "email": "user@example.com",
      "user_type": "job_seeker",
      "name": "张三"
    }
  }
}
```

### 5. 刷新token
**接口地址**: `/api/auth/refresh`  
**请求方式**: `POST`  
**是否需要认证**: 否（但需要refresh token）

**请求参数**:
```json
{
"refresh_token": "your_refresh_token_here"
}
```

**响应数据**:
```json
{
  "code": 200,
  "message": "Token刷新成功",
  "data": {
    "access_token": "new_access_token_here",
    "refresh_token": "new_refresh_token_here", 
    "token_type": "bearer",
    "expires_in": 7200
  }

### 6. 登出
**接口地址**: `/api/auth/logout`  
**请求方式**: `POST`  
**是否需要认证**: 是
**请求参数**:
无 header中含token

**响应数据**:
```json
{
  "code": 200,
  "message": "退出登录成功"
}
```

---

## 公司主页

### 1. 获取公司信息
**接口地址**: `/api/company/companyinfo`  
**请求方式**: `GET`  
**是否需要认证**: 是

**响应数据**:
```json
{
  "companyName": "Company Name",
"avatar": "https://example.com/new_avatar.jpg"
  "slogan": "This is slogan",
"company_website": "123@xx.com",
  "staffs_number": 1000,
  "location": "chengdu",
"email": "user@example.com",
  "phone": "13800138000",
  "twitter_link": "123@xx.com",
"qq_link": "123@xx.com",
"github_link": "123@xx.com",
  "introduction": "xxxx",
  "project_category": { "DEX" , "ARM" }
  "supported_chains": { "DEX" , "ARM" }
}
```

### 2. 更新公司信息
**接口地址**: `/api/company/companyinfo`  
**请求方式**: `PUT`  
**是否需要认证**: 是

**请求参数**:
```json
{
  "location": "chengdu",
"email": "user@example.com",
  "phone": "13800138000",
  "twitter_link": "123@xx.com",
"qq_link": "123@xx.com",
"github_link": "123@xx.com",
  "introduction": "xxxx"
}
```

**响应数据**: 更新后的公司信息

### 3. 创建公司信息
**接口地址**: `/api/company/companyinfo`  
**请求方式**: `POST`  
**是否需要认证**: 是

**请求参数**:
```json
{
  “token”:”xxxx”,
“role”:”admin”,
  "companyName": "Company Name",
"avatar": "https://example.com/new_avatar.jpg"
  "slogan": "This is slogan",
"company_website": "123@xx.com",
  "staffs_number": 1000,
  "location": "chengdu",
"email": "user@example.com",
  "phone": "13800138000",
  "twitter_link": "123@xx.com",
"telegram_link": "123@xx.com",
"wechat_link": "123@xx.com",
"github_link": "123@xx.com",
  "introduction": "xxxx",
  "project_category": { "DEX" , "ARM" },
  "supported_chains": { "DEX" , "ARM" },
"skills_tag": { "DEX" , "ARM" }
}
```
插入companies和company_recruiters表



---

## 职位管理模块

### 1. 创建职位
**接口地址**: `/api/job`  
**请求方式**: `POST`  
**是否需要认证**: 是（仅企业用户）

**请求参数**:
```json
{
  "title": "前端开发工程师",
  "work_location": "北京市朝阳区",
"work_type": "full_time", // full_time, part_time
  "office_mode": "online", // online, offline
"min_salary": "15000",// 统一记录年薪
"max_salary": "45000",
"category": "提供选项",
"overview": "xxx",
"responsibility": "xxx",
  "qualification": "xxx",
  "details": "xxx"
}
```

**响应数据**:
```json
{
  "job_id": 456,
  "title": "前端开发工程师",
  "status": "pending",
  "created_at": "2023-01-01T00:00:00Z"
}
```

### 2. 获取职位列表
**接口地址**: `/api/job`  
**请求方式**: `GET`  
**是否需要认证**: 否

**查询参数**:
- `page`: 页码（默认1）
- `size`: 每页数量（默认12）
- `keyword`: 搜索关键词
- `category`: 职位类别
- `office_mode`: 工作模式
- `work_type`: 工作方式
- `min_salary`: 最低薪资
- `max_salary`: 最高薪资

**响应数据**:
```json
{
  "jobs": [
    {
      "job_id": 456,
      "title": "前端开发工程师",
"company_id": 123,
      "company_name": "某科技公司",
      "category": "Backend",
"work_type": "full_time", // full_time, part_time
      "office_mode": "online", // online, offline
    "min_salary": "15000",// 统一记录年薪
"max_salary": "45000",
      "priority": 200 (order by this desc)
    }
  ],
  "pagination": {
    "page": 1,
    "size": 12,
    "total": 100
  }
}
```

### 3. 获取职位详情
**接口地址**: `/api/jobs/{job_id}`  
**请求方式**: `GET`  
**是否需要认证**: 否

**响应数据**:
```json
{
  "job_id": 456,
  "title": "前端开发工程师",
  "title": "前端开发工程师",
  "work_location": "北京市朝阳区",
"work_type": "full_time", // full_time, part_time
  "office_mode": "online", // online, offline
"min_salary": "15000",(统一记录年薪)
"max_salary": "45000",
"overview": "xxx",
"responsibility": "xxx",
  "qualification": "xxx",
  "details": "xxx",
  "created_at": "2023-01-01T00:00:00Z"
}
```

### 4. 更新职位信息
**接口地址**: `/api/jobs/{job_id}`  
**请求方式**: `PUT`  
**是否需要认证**: 是（仅职位创建者）

**请求参数**: 同创建职位

### 5. 删除职位
**接口地址**: `/api/jobs/{job_id}`  
**请求方式**: `DELETE`  
**是否需要认证**: 是（仅职位创建者）

---

## 简历管理模块

### 1. 创建简历
**接口地址**: `/api/resumes`  
**请求方式**: `POST`  
**是否需要认证**: 是（仅求职者用户）

**请求参数**:
```json
{
  "title": "前端开发工程师简历",
  "person_detail": [
    {
      "name": "张三",
      "phone_number": "123321",
      "email_address": "123@xx.com",
      "telegram": "xxx",
      "wechat": "xxx"
    }
  ],
  "education": "本科",
  "language": "英语",
  "web3": 3,// 以年为单位
  "visible": 1,// 0 or 1,
  "expected_location": "成都",
  "education": "本科",
"work_type": "full_time", // full_time, part_time
  "office_mode": "online", // online, offline
"min_salary": "15000",// 统一记录年薪
"max_salary": "45000",
  "skills": ["JavaScript", "Vue", "React"],
  "experience": "xxx",
  "advantage": "xxx"
}
```

**响应数据**:
```json
{
  "resume_id": 789,
  "updated_at": "2023-01-01T00:00:00Z"
}
```

### 2. 获取简历详情
**接口地址**: `/api/resumes/{resume_id}`  
**请求方式**: `GET`  
**是否需要认证**: 是（仅简历所有者或相关企业）

**响应数据**: 简历详细信息

### 3. 更新简历信息
**接口地址**: `/api/resumes/{resume_id}`  
**请求方式**: `PUT`  
**是否需要认证**: 是（仅简历创建者）

**请求参数**: 同创建简历

### 4. 删除简历
**接口地址**: `/api/resumes/{resume_id}`  
**请求方式**: `DELETE`  
**是否需要认证**: 是（仅简历创建者）

---

## 授权模块

### 1. 搜索授权
**接口地址**: `/api/roles`  
**请求方式**: `GET`  
**是否需要认证**: 是

**查询参数**:
- `full_name`: 全名
- `email_address`: 邮箱地址

**响应数据**:
```json
{
  "members": [
    {
      "user_id": 456,
"recruiter_id": 456,
      “name”: "张三"
      "title": "HR"
    }
  ]
}
```
查询recruiters 表

### 1.5 搜索已有授权
**接口地址**: `/api/roles/exists`  
**请求方式**: `GET`  
**是否需要认证**: 是

**查询参数**:
- `token`: xxx

**响应数据**:
```json
{
  "members": [
    {
"recruiter_id": 456,
      “name”: "张三"
      "title": "HR"
    }
  ]
}
```
查询company_recruiters表



### 2. 添加授权
**接口地址**: `/api/roles`  
**请求方式**: `POST`  
**是否需要认证**: 是（仅公司管理员[company_recruiters中的admin]）

**请求参数**:
```json
{
  “token”: “xxx”
  "members": [
    {
      "user_id": 456,
"recruiter_id": 456
    }
  ]
}
```
用token获取user_id再获取company_id然后插入到company_recruiters

**响应数据**:
```
json
{
  "code": 200,
  "message": "添加成功",
  "data": {
  }
}
```

### 3. 删除授权
**接口地址**: `/api/roles/recruiter_id`  
**请求方式**: `DELETE`  
**是否需要认证**: 是（仅公司管理员）

更改company_recruiters的status为suspended



